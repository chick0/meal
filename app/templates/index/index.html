{% extends 'layout.html' %}
{% block content %}
    <section class="lf">
        <h1>급식</h1>
    </section>

    <section class="message-box l">
        <form method="post" onsubmit="return search()" action="{{ url_for('school.select') }}">
            <p>
                <label for="school_name">학교 찾기</label>
            </p>
            <input type="text" id="school_name" name="school_name" placeholder="{{ placeholder }}" size="15" maxlength="10">
        </form>
    </section>

    <section class="lf" id="result_display">
        <h2 id="status"></h2>
        <ol class="list" id="display" style="list-style:none;"></ol>
    </section>

    <section class="menu">
        <a class="btn" href="{{ url_for('app.start_page') }}">즐겨찾기 확인하기</a>
    </section>
{% endblock %}
{% block script %}
    <script src="{{ url_for('static', filename='js/axios.min.js') }}"></script>
    <script type="text/javascript">
        const url = "{{ url_for('api.school') }}";
        function search(){let e=new Date;return document.getElementById("school_name").blur(),document.getElementById("result_display").setAttribute("style","margin-bottom:100%;"),document.getElementById("status").innerText="검색결과를 불러오는 중...",axios({method:"GET",url:url,params:{school_name:document.getElementById("school_name").value}}).then(function(t){for(key in document.getElementById("display").innerHTML="",t.data){var n=document.createElement("li"),o=document.createElement("a");o.setAttribute("class","btn"),o.setAttribute("href",t.data[key].url),o.appendChild(document.createTextNode(t.data[key].name)),n.appendChild(o),document.getElementById("display").appendChild(n)}let a=new Date;document.getElementById("status").innerText="검색결과를 불러옴 ("+(a-e)/1e3+"초)",window.scrollTo({top:window.pageYOffset+document.getElementById("result_display").getBoundingClientRect().top-15,behavior:"smooth"})}).catch(function(t){let n=new Date;document.getElementById("status").innerText="검색결과를 불러옴 ("+(n-e)/1e3+"초)",window.alert(t.response.data.message),document.getElementById("school_name").value="",document.getElementById("school_name").focus()}),!1}
    {% if alert is not none %}
        window.alert("{{ alert }}");
    {% endif %}
    </script>
{% endblock %} {# https://gist.github.com/chick0/d20ee8b67c9ef59d8181e1079e693505 #}